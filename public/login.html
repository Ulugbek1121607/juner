<script>
    function previewPhoto(event) {
        const reader = new FileReader();
        reader.onload = function () {
            const output = document.getElementById('photoPreview');
            output.src = reader.result;
            output.style.display = 'block';
        };
        reader.readAsDataURL(event.target.files[0]);
    }

    async function submitForm(event) {
        event.preventDefault();

        const formData = new FormData(document.getElementById("registerForm"));
        const userData = {};

        formData.forEach((value, key) => {
            userData[key] = value;
        });

        // JSON faylga yozish uchun serverga yuborish
        fetch("/save-user", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify(userData)
        })
        .then(response => response.json())
        .then(data => {
            alert(data.message);
        })
        .catch(error => {
            console.error("Xatolik yuz berdi:", error);
        });
    }

    // Scroll effekti
    const inputBoxes = document.querySelectorAll('.input-box');
    const checkVisibility = () => {
        inputBoxes.forEach((box) => {
            const boxTop = box.getBoundingClientRect().top;
            const boxBottom = box.getBoundingClientRect().bottom;
            if (boxTop < window.innerHeight && boxBottom > 0) {
                box.classList.add('active');
            }
        });
    };

    window.addEventListener('load', checkVisibility);
    window.addEventListener('scroll', checkVisibility);
</script>
